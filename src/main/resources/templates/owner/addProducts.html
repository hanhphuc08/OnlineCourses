<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Add New Course</title>
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="noindex" />
<!-- Price Slider Stylesheets -->
<link rel="stylesheet"
	href="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/nouislider/nouislider.css" />
<!-- Google fonts - Playfair Display -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" />
<link rel="stylesheet" href="fonts/hkgrotesk/stylesheet.2e9c9834.css" />
<!-- Owl carousel -->
<link rel="stylesheet"
	href="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/owl.carousel/assets/owl.carousel.css" />
<!-- Lightbox -->
<link rel="stylesheet"
	href="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/glightbox/css/glightbox.min.css" />
<!-- Theme stylesheet -->
<link rel="stylesheet"
	href="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/css/style.default.7acfaf01.css"
	id="theme-stylesheet" />
<!-- Custom stylesheet - for your changes -->
<link rel="stylesheet"
	href="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/css/custom.0a822280.css" />
<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<!-- Bootstrap 5 CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet" />
<style>
body {
	font-family: "Poppins", sans-serif;
	background-color: #f5f7fa;
}

/* Ensure custom-sidebar applies to imported fragments */
.custom-sidebar {
	/* This class is used as a namespace for sidebar and header styles */
	
}

/* Main Content */
.main-content {
	margin-left: 280px;
	padding: 20px;
}

/* Course Header */
.main-content .course-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
}

.main-content .course-header h2 {
	font-size: 24px;
	font-weight: 600;
	color: #343a40;
}

.main-content .course-header .btn-link {
	background-color: #f8f9fa;
	color: #2c7ec4;
	text-decoration: none;
	font-size: 16px;
	padding: 8px 16px;
	border: 1px solid #3494e6;
	border-radius: 5px;
}

.main-content .course-header .btn-link:hover {
	background-color: #3494e6;
	color: #fff;
}

/* Breadcrumb */
.main-content .breadcrumb {
	margin-bottom: 20px;
}

.main-content .breadcrumb-item a {
	color: #3494e6;
	text-decoration: none;
}

.main-content .breadcrumb-item a:hover {
	text-decoration: underline;
}

/* Form Sections */
.main-content .form-section {
	background-color: #fff;
	border-radius: 10px;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
	padding: 20px;
	margin-bottom: 20px;
}

.main-content .form-section h5 {
	font-size: 18px;
	font-weight: 600;
	color: #343a40;
	margin-bottom: 20px;
}

.main-content .form-section .form-group {
	margin-bottom: 15px;
}

.main-content .form-section .form-group label {
	font-weight: 500;
	color: #343a40;
	margin-bottom: 5px;
}

.main-content .form-section .form-control, .main-content .form-section .form-select
	{
	border-radius: 5px;
	border: 1px solid #ced4da;
	padding: 8px;
	font-size: 14px;
}

.main-content .form-section .form-control:focus, .main-content .form-section .form-select:focus
	{
	border-color: #3494e6;
	box-shadow: 0 0 5px rgba(52, 148, 230, 0.2);
}

/* Image Upload */
.main-content .image-upload {
	border: 2px dashed #ced4da;
	border-radius: 10px;
	height: 150px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #6c757d;
	font-size: 14px;
	background-color: #f8f9fa;
}

/* Two Columns Layout */
.main-content .form-two-columns {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}

.main-content .form-two-columns .col {
	flex: 1;
	min-width: 300px;
}

/* Status Radio Buttons */
.main-content .status-radio label {
	margin-right: 20px;
	font-size: 14px;
	color: #343a40;
}

/* Submit Button */
.main-content .submit-section {
	text-align: right;
}

.main-content .submit-section .btn-primary {
	background-color: #3494e6;
	border-color: #3494e6;
}

.main-content .submit-section .btn-primary:hover {
	background-color: #2c7ec4;
	border-color: #2c7ec4;
}

/* Image Input Options */
.main-content .image-options {
	display: flex;
	align-items: center;
	gap: 10px;
	margin-bottom: 10px;
}

.main-content .image-options input[type="radio"] {
	margin-right: 5px;
}
</style>
</head>
<body>
	<!-- Sidebar -->
	<div class="custom-sidebar">
		<div th:replace="~{owner/sidebar :: sidebar}"></div>
	</div>

	<!-- Main Content -->
	<div class="main-content">
		<!-- Header -->
		<div class="custom-sidebar">
			<div th:replace="~{owner/sidebar :: header}"></div>
		</div>

		<!-- Course Header -->
		<div class="course-header">
			<h2>Add New Course</h2>
			<a th:href="@{/owner/productsList}" class="btn btn-link">Back to Courses List</a>
		</div>

		<!-- Breadcrumb -->
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><i class="fas fa-home px-2"></i><a
				href="/dashboard">Dashboard</a></li>
			<li class="breadcrumb-item"><a th:href="@{/owner/productsList}">Courses</a></li>
			<li class="breadcrumb-item active">Add Course</li>
		</ol>

		<!-- Form -->
		<form th:action="${isEdit} ? @{/owner/course/edit} : @{/owner/course/add}" 
              method="post" 
              th:object="${course}"
              id="addCourseForm">
            <input th:if="${isEdit}" type="hidden" name="courseID" th:value="${course.courseID}"/>

            <!-- Course Information -->
            <div class="form-section">
                <h5>Thông tin khóa học</h5>
                <div class="form-two-columns">
                    <div class="col">
                        <div class="form-group">
                            <label for="title">Tiêu đề</label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   th:value="${course.title}" placeholder="Nhập tiêu đề khóa học" required />
                        </div>
                        <div class="form-group">
                            <label for="description">Mô tả</label>
                            <textarea class="form-control" id="description" name="description" rows="3" 
                                      th:text="${course.description}" placeholder="Nhập mô tả khóa học"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="prices">Giá (VNĐ)</label>
                            <input type="number" step="0.01" class="form-control" id="prices" name="prices" 
                                   th:value="${course.prices}" placeholder="Nhập giá khóa học" required />
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="categoryID">Danh mục khóa học</label>
                            <select class="form-select" id="categoryID" name="categoryID" required>
                                <option value="" disabled selected>Chọn danh mục</option>
                                <option th:each="cat : ${categories}" 
                                        th:value="${cat.categoryID}" 
                                        th:text="${cat.categoryName}" 
                                        th:selected="${cat.categoryID == course.category?.categoryID}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Trạng thái</label>
                            <div class="status-radio">
                                <input type="radio" id="statusActive" name="status" value="ACTIVE" 
                                       th:checked="${course.status == null || course.status == 'ACTIVE'}" />
                                <label for="statusActive">Kích hoạt</label>
                                <input type="radio" id="statusInactive" name="status" value="INACTIVE" 
                                       th:checked="${course.status == 'INACTIVE'}" />
                                <label for="statusInactive">Không kích hoạt</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="quantity">Số lượng</label>
                            <input type="number" min="0" class="form-control" id="quantity" name="quantity" 
                                   th:value="${course.quantity}" placeholder="Nhập số lượng" required />
                        </div>
                        <div class="form-group">
                            <label for="duration">Thời lượng</label>
                            <input type="date" class="form-control" id="duration" name="duration" 
                                   th:value="${course.duration != null} ? ${#temporals.format(course.duration, 'yyyy-MM-dd')} : ''" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course Images -->
            <div class="form-section">
                <h5>Hình ảnh khóa học</h5>
                <div class="form-group">
                    <label for="imageUrl">URL hình ảnh</label>
                    <input type="text" class="form-control" id="imageUrl" name="imageUrl" 
                           th:value="${course.image}" placeholder="Nhập URL hình ảnh" th:required="${!isEdit}" />
                </div>
            </div>

            <!-- Submit Button -->
            <div class="submit-section">
                <button type="submit" class="btn btn-primary" 
                        th:text="${isEdit} ? 'Cập nhật khóa học' : 'Thêm khóa học'"></button>
            </div>
        </form>
	</div>

	<!-- JavaScript files -->
	
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/jquery/jquery.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/owl.carousel/owl.carousel.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/owl.carousel2.thumbs/owl.carousel2.thumbs.min.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/nouislider/nouislider.min.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/smooth-scroll/smooth-scroll.polyfills.min.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/glightbox/js/glightbox.min.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/object-fit-images/ofi.min.js"></script>
	<script>
		var basePath = "";
	</script>
	<script src="js/theme.30e7c8f9.js"></script>
	<script
		src="https://d19m59y37dris4.cloudfront.net/sell/2-0-1/vendor/jquery.cookie/jquery.cookie.js"></script>
	<script src="js/demo.9833433a.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
        function injectSvgSprite(path) {
            var ajax = new XMLHttpRequest();
            ajax.open("GET", path, true);
            ajax.send();
            ajax.onload = function(e) {
                var div = document.createElement("div");
                div.className = "d-none";
                div.innerHTML = ajax.responseText;
                document.body.insertBefore(div, document.body.childNodes[0]);
            };
        }
        injectSvgSprite("https://demo.bootstrapious.com/sell/1-2-0/icons/orion-svg-sprite.svg");
    </script>
    <script th:inline="javascript">
        // Hiển thị thông báo SweetAlert2 khi có success hoặc error từ server
        document.addEventListener("DOMContentLoaded", function () {
            const successMessage = /*[[${success} ? ${success} : null]]*/ null;
            const errorMessage = /*[[${error} ? ${error} : null]]*/ null;
            if (successMessage) {
                Swal.fire({
                    icon: 'success',
                    title: 'Thành công',
                    text: successMessage,
                    confirmButtonText: 'OK',
                    timer: 3000,
                    timerProgressBar: true
                });
            }
            if (errorMessage) {
                Swal.fire({
                    icon: 'error',
                    title: 'Lỗi',
                    text: errorMessage,
                    confirmButtonText: 'OK'
                });
            }
        });
    </script>

</body>
</html>